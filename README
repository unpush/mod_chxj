
--------------------------------------------------------------------------------
Table of contents

   1. 概要

   2. 使用方法
     2-1. 対応タグ
     2-2. 独自タグ
     2-3. 文字コード
     2-4. 絵文字について

--------------------------------------------------------------------------------

1. 概要

  日本国内の主要携帯（３キャリア）向けコンテンツ変換ミドルウェアをApache2.0用
  のモジュールとして 作成します。
  CHTMLで作成したコンテンツを出力時にUserAgentを見てHDML、XHTML、JHTMLに変換
  する、出力フィルターです。

--------------------------------------------------------------------------------

2. 使用方法

  2-1. 対応CHTMLタグ

     対応タグ一覧
    +-----------+------------+-------------------------------------------+
    | タグ      | 属性       | 備考                                      |
    +-----------+------------+-------------------------------------------+
    | <HTML>    | なし       | 属性を指定した場合は無視します            |
    +-----------+------------+-------------------------------------------+
    | <META>    | http-equiv | HDML、CHTML1.0では無視します              |
    |           | content    | HDML、CHTML1.0では無視します              |
    +-----------+------------+-------------------------------------------+
    | <HEAD>    | なし       | 属性を指定した場合は無視します            |
    +-----------+------------+-------------------------------------------+
    | <TITLE>   | なし       | 属性を指定した場合は無視します            |
    +-----------+------------+-------------------------------------------+
    | <BASE>    | href       | HDMLでは無視します                        |
    +-----------+------------+-------------------------------------------+
    | <BODY>    | bgcolor    | HDML、CHTML1.0、CHTML2.0では無視します    |
    |           | text       | HDML、CHTML1.0、CHTML2.0では無視します    |
    |           | link       | HDML、CHTML1.0、CHTML2.0では無視します    |
    +-----------+------------+-------------------------------------------+
    | <A>       | href       |                                           |
    |           | accesskey  |                                           |
    +-----------+------------+-------------------------------------------+
    | <BR>      | なし       |                                           |
    +-----------+------------+-------------------------------------------+
    | <FONT>    | color      | HDML, CHTML1.0では無視します              |
    +-----------+------------+-------------------------------------------+
    | <FORM>    | action     |                                           |
    |           | method     | HDMLでは無視します                        |
    +-----------+------------+-------------------------------------------+
    | <INPUT>   | name       |                                           |
    |           | type       | text,password,hidden,radio,checkbox,submit|
    |           | value      | に対応                                    |
    +-----------+------------+-------------------------------------------+
    | <SELECT>  | name       |                                           |
    |           | size       | HDMLでは無視します                        |
    +-----------+------------+-------------------------------------------+
    | <OPTION>  | value      | ※必ず閉じてください。                    |
    |           | checked    |                                           |
    +-----------+------------+-------------------------------------------+
    | <DIV>     | align      |                                           |
    +-----------+------------+-------------------------------------------+
    | <HR>      |            |                                           |
    +-----------+------------+-------------------------------------------+
    | <CENTER>  |            |                                           |
    +-----------+------------+-------------------------------------------+
    | <IMG>     | src        |                                           |
    +-----------+------------+-------------------------------------------+
    | <CHXJ:IF> | lang       |                                           |
    +-----------+------------+-------------------------------------------+

    上記以外のタグは、無視されます。

  2-2. 独自タグ

    <chxj:if>

       <chxj:if>タグ中のタグ、その他のテキストは、変換せずに出力します。
       必須の属性としてlangがあります。lang属性を指定することによって、
       例えば、HDML機のみ出力させる、といったことを可能にします。

       ex) HDML機のみ出力します。

       <chxj:if lang="hdml">
         <DISPLAY>
           あなたはHDML機ですね
         </DISPLAY>
       </chxj:if>

       chxj:ifタグで囲まれた中には、タグを直接書くことができます。

       ex) i-Modeのみ出力します。

       <chxj:if lang="chtml">
         シークレットコードがどーのこーの。
       </chxj:if>

       また、lang属性は複数指定することも可能です。


       ex) HDML機,J-PHONE機は以下を出力します。
       ※ J-PHONE、Vodafoneで使用するHTMLは便宜上JHTMLとしています。
       
       <chxj:if lang="hdml" lang="jhtml">
         あなたの携帯は、HDML機かJ-HTML機ですね？
       </chxj:if>

  2-3. 文字コード

    文字コードは、Shift_JISのみ対応しています。


  2-4. 絵文字

    i-mode対応の絵文字をバイナリコード、または、１０進参照文字列で記述しておくと、
  emoji.xml中に定義した内容で、それぞれの機種に応じて変換します。
    
    i-modeの絵文字を１０進参照文字列で記述した場合で、i-modeからのアクセスの場合は、
  ２バイトのバイナリコードに変換してから、クライアントに送信します。

--------------------------------------------------------------------------------
